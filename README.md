# moodline

標準入力から受け取ったテキストを 1 行ずつ読み取り，  
簡単なキーワードに基づいて感情ラベルを付けて出力するコマンドである。

感情ラベルは次の 4 種類である。

- `[positive]`
- `[negative]`
- `[angry]`
- `[neutral]`

高度な解析ではなく，単純なキーワード照合に基づく簡易的な処理を行う。

##インストール

Python 3 が必要である。

bash
git clone https://github.com/<YOUR-USERNAME>/moodline.git
cd moodline
chmod +x moodline

## 使い方

### 基本的な例

echo "今日はとても楽しい授業だった" | ./moodline
出力例:
[positive] 今日はとても楽しい授業だった

### ネガティブな例

echo "今日は最悪な一日だった" | ./moodline
出力例:
[negative] 今日は最悪な一日だった

### 複数行を処理する例

printf "楽しい\n最悪\n怒っている\n普通\n" | ./moodline
出力例:
[positive] 楽しい
[negative] 最悪
[angry] 怒っている
[neutral] 普通

### 標準入力がない場合

./moodline

標準エラー出力に次のようなメッセージを出して終了する。
Usage: echo 'text' | moodline

このとき終了ステータスは 1 となる。
スクリプトやテストからは，この終了ステータスを利用して動作を確認できる。

### 入出力仕様

入力（標準入力）
UTF-8 テキストを想定する。
1 行ごとに 1 つの文として扱う。
空行（空白文字しか含まない行）は無視する。

### 出力（標準出力）

各入力行に対して，次の形式で 1 行ずつ出力する。
[LABEL] 元の行（長い場合は末尾を省略）
LABEL は [positive], [negative], [angry], [neutral] のいずれかである。
行が長すぎる場合は，約 80 文字を上限として末尾に … を付けて省略する。

### 実装の概要

moodline は，あらかじめ決めたキーワードのリストを用いて，行の雰囲気を簡単に判定する。
内部的には，次のような処理を行っている。
1. 標準入力から 1 行ずつテキストを読み込む。
2.各行について，
- ポジティブな意味を持つキーワード
- ネガティブな意味を持つキーワード
- 怒りを表すキーワードの出現数を数える。
もっとも多く含まれているカテゴリをラベルとして選ぶ。

対応するラベルと，元の行（長すぎる場合は省略）を組み合わせて出力する。

このように，単純なキーワード照合に基づく処理であり，
文脈や微妙なニュアンスを理解することはできない。
あくまで「ざっくりとした目安」を付けるための道具として設計している。

## テスト

このリポジトリには，動作確認のための Bash スクリプト test.bash が含まれている。

ローカルでのテスト実行
chmod +x test.bash
./test.bash

このスクリプトでは，次のような点を確認している。
-ポジティブな文に対して [positive] が付くこと
-ネガティブな文に対して [negative] が付くこと
-怒りを含む文に対して [angry] が付くこと
-標準入力を与えずに実行した場合に，エラー終了し，使い方メッセージを出力すること

## GitHub Actions

.github/workflows/test.yml により，GitHub 上でも自動的にテストが実行される。
-flake8 による Python コードの簡易的な静的チェック
-test.bash による動作テスト
リポジトリに push したときや Pull Request を作成したときに，これらのテストが自動で実行される。

## ライセンスと著作権

このプロジェクトは MIT License の下で公開されている。
詳しくは同梱の LICENSE ファイルを参照のこと

